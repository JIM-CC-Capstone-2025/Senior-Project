sudo apt-get update
sudo apt-get install curl
curl -fsSL https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo gpg --dearmor -o /usr/share/keyrings/elasticsearch-keyring.gpg
echo "deb [signed-by=/usr/share/keyrings/elasticsearch-keyring.gpg] https://artifacts.elastic.co/packages/8.x/apt stable main" | sudo tee /etc/apt/sources.list.d/elastic-8.x.list
sudo apt-get update
sudo apt-get install elasticsearch -y
sudo nano /etc/elasticsearch/elasticsearch.yml
cluster.name: capstone-jim
node.name: soc-jim
network.host: 0.0.0.0
http.port: 9200
# Security settings (already enabled by default in 8.x)
xpack.security.enabled: true
xpack.security.enrollment.enabled: true
sudo systemctl enable elasticsearch
sudo systemctl start elasticsearch
sudo systemctl status elasticsearch
sudo apt-get install kibana -y
sudo nano /etc/kibana/kibana.yml
server.port: 5601
server.host: "0.0.0.0"
sudo systemctl enable kibana
sudo systemctl start kibana
sudo systemctl status kibana
sudo /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana
go to http://192.168.1.3:5601
it will ask for enrollment token and verification code
sudo journalctl -u kibana --since "10 minutes ago" --no-pager | grep -i "verification code"
enter the code in the webpage
openssl rand -hex 16
openssl rand -hex 16
openssl rand -hex 16
sudo nano /etc/kibana/kibana.yml
xpack.encryptedSavedObjects.encryptionKey: "PASTE_FIRST_KEY_HERE"
xpack.reporting.encryptionKey: "PASTE_SECOND_KEY_HERE"
xpack.security.encryptionKey: "PASTE_THIRD_KEY_HERE"
